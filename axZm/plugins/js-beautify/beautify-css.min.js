/*
  CSS Beautifier
  The MIT License (MIT)
  Copyright (c) 2007-2013 Einar Lielmanis and contributors.
  Written by Harutyun Amirjanyan, (amirjanyan@gmail.com)
  Based on code initially developed by: Einar Lielmanis, <elfz@laacz.lv>
  http://jsbeautifier.org/
*/

function css_beautify(f,k){function g(){return a=f.charAt(++c)}function p(b){for(var d=c;g();)if("\\"===a)g(),g();else if(a===b)break;else if("\n"===a)break;return f.substring(d,c+1)}function l(){for(var a=c;m.test(f.charAt(c+1));)c++;return c!==a}function r(){var b=c;for(g();g();)if("*"===a&&"/"===f.charAt(c+1)){c++;break}return f.substring(b,c+1)}k=k||{};var h=k.indent_size||4,n=k.indent_char||" ";"string"===typeof h&&(h=parseInt(h,10));var m=/^\s+$/,c=-1,a,d=f.match(/^[\r\n]*[\t ]*/)[0],n=Array(h+ 1).join(n),q=0,e={"{":function(a){e.singleSpace();b.push(a);e.newLine()},"}":function(a){e.newLine();b.push(a);e.newLine()},newLine:function(a){if(!a)for(;m.test(b[b.length-1]);)b.pop();b.length&&b.push("\n");d&&b.push(d)},singleSpace:function(){b.length&&!m.test(b[b.length-1])&&b.push(" ")}},b=[];for(d&&b.push(d);;){var j;j=c;do;while(m.test(g()));j=c!==j+1;if(!a)break;"{"===a?(q++,d+=n,e["{"](a)):"}"===a?(q--,d=d.slice(0,-h),e["}"](a)):'"'===a||"'"===a?b.push(p(a)):";"===a?b.push(a,"\n",d):"/"=== a&&"*"===f.charAt(c+1)?(e.newLine(),b.push(r(),"\n",d)):"("===a?"url"===f.substring(c-3,c).toLowerCase()?(b.push(a),l(),g()&&(")"!==a&&'"'!==a&&"'"!==a?b.push(p(")")):c--)):(j&&e.singleSpace(),b.push(a),l()):")"===a?b.push(a):","===a?(l(),b.push(a),e.singleSpace()):("]"!==a&&("["===a||"="===a?l():j&&e.singleSpace()),b.push(a))}return b.join("").replace(/[\n ]+$/,"")}"undefined"!==typeof exports&&(exports.css_beautify=css_beautify);